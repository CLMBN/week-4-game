<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Crystal Game</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/spacelab/bootstrap.min.css">  
  <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  
</head>

<body>
  
  <nav class="container navbar navbar-inverse">
      <div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>                        
            </button>
            <a class="navbar-brand active" href="https://juan-ossa-portfolio.herokuapp.com">Juan Ossa</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://juan-ossa-portfolio.herokuapp.com/index.html">About</a></li>
              <li><a href="https://juan-ossa-portfolio.herokuapp.com/portfolio.html">Portfolio</a></li>
              <li><a href="https://juan-ossa-portfolio.herokuapp.com/contact.html">Contact</a></li>
            </ul>
        </div>
      </div>
  </nav>

  <div class="container text-center">    
    <div class="row-fluid content">
        <div class="col-sm-12 col-md-12 col-lg-12 text-left">
            <div id="game">

              <h1>Number to Guess: <span id="number-to-guess"></span></h1>

              <h3>Click on the magical crystals to add to your score until you reach the number to guess.</h3>
              <h3>Be careful dont go over!</h3>

              <div id="crystals">
              </div>
                  
              <h3>Your Total Score is: <span id=yourScore></span></h3>

            <div><span id="statusMessage"></span></div>
            <h3>Wins: <span id="wins"></span></h3>
            <h3>Loses: <span id="loses"></span></h3>

            </div>    
        </div>
    </div>
  </div>
  <footer class="container-fluid text-center">
  <p>
    Copyright &copy; 2016 Juan Ossa
  </p>
  </footer>
  <script>
    // self executing function here
    
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="assets/javascript/game2.js"></script>

 <!-- JAVASCRIPT  -->
 <!-- ========================================= -->
 <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

 <script type="text/javascript">

//Random number between 19 - 120
 var targetNumber = Math.floor(Math.random() * (120-19+1) + 19);
 var counter = 0;
 var wins = 0;
 var loses = 0;

  $("#number-to-guess").text(targetNumber); 
  $("#yourScore").text(counter);
  $("#wins").text(wins);
  $("#loses").text(loses);

//Random number for crystals between 1-12
 var numberCrystal = [Math.floor(Math.random() * (12-1+1) + 1), Math.floor(Math.random() * (12-1+1) + 1), Math.floor(Math.random() * (12-1+1) + 1), Math.floor(Math.random() * (12-1+1) + 1)]

 for (var i = 0; i < 4; i++) {

   // For each iteration, we will create an imageCrystal
   var imageCrystal = $("<img>");

   // First each crystal will be given the class ".crystal-image".
   // This will allow the CSS to take effect.
   imageCrystal.addClass("crystal-image");

   // Each imageCrystal will be given a src link to the crystal image
   imageCrystal.attr("src", "http://cdn.playbuzz.com/cdn/35910209-2844-45c0-b099-f4d82878d54f/00261fda-4062-4096-81fd-8cf96b9034e8.jpg");

   // Each imageCrystal will be given a data attribute called data-crystalValue.
   // This data attribute will be set equal to the array value.
   imageCrystal.attr("data-crystalvalue", numberCrystal[i]);

   // Lastly, each crystal image (with all it classes and attributes) will get added to the page.
   $("#crystals").append(imageCrystal);
 }

 // This time, our click event applies to every single crystal on the page. Not just one.
 $(".crystal-image").on("click", function() {
   
   var crystalValue = ($(this).attr("data-crystalvalue"));

   crystalValue = parseInt(crystalValue);
   counter += crystalValue;
  

  $("#yourScore").text(counter);

   if (counter === targetNumber) {
     counter = 0;
     targetNumber = Math.floor(Math.random() * (120-19+1) + 19);
     $("#statusMessage").text("You Win!");
     wins++;
     $("#wins").text(wins);

   }

   else if (counter >= targetNumber) {
     targetNumber = Math.floor(Math.random() * (120-19+1) + 19);
     counter = 0;
     $("#statusMessage").text("You Lose!");
     loses++;
     $("#loses").text(loses);

   }
 
  $("#number-to-guess").text(targetNumber); 
  $("#yourScore").text(counter);
 
 });


 </script>
</body>
</html>